<!DOCTYPE>
<html>
<head>
<title>JSVM</title>
</head>
<body onload="reset();">
<h1 style="text-align: center">
JSVM
</h1>
<div style="display: flex">
<div style="width: 400px">
<div style="text-align: center; display:flex">
<p style="flex:1">Assembly</p>
<p style="flex:1">Direct Machine code</p>
</div>
<div style="text-align: center; display:flex">
<textarea id="ASM"
style="flex:1; margin-right: 5px" rows=20>
</textarea>
<textarea id="DMC"
style="flex:1">
</textarea>
</div>
<div style="text-align: center; display:flex">
<button onclick="asm();" style="flex:1">Assemble</button>
<button onclick="load();" style="flex:1">Load</button>
<button onclick="reset();" style="flex:1">Reset</button>
<button onclick="exec();" style="flex:1">Execute</button>
<button onclick="updateVM();" style="flex:1">Update View</button>
</div>
<table id="OPTABLE1" style="position: relative; margin-top: 5px; text-align: center; visibility: visible;">
  <th>Op Code<td><b>Assembly</b></td><td><b>Op Code</b></td><td><b>Assembly</b></td></th>
  <tr><td>00</td><td>NOP</td><td>80</td><td>NOT</td></tr>
  <tr><td>10</td><td>LDA &#60x&#62</td><td>9X</td><td>AND</td></tr>
  <tr><td>20</td><td>SDA &#60x&#62</td><td>A0</td><td>OR</td></tr>
  <tr><td>3X</td><td>SWPB</td><td>B0</td><td>XOR</td></tr>
  <tr><td>40</td><td>ADD</td><td>C0</td><td>PUSH</td></tr>
  <tr><td>5X</td><td>JMP &#60x&#62</td><td>D0</td><td>POP</td></tr>
  <tr><td>6X</td><td>CALL &#60x&#62</td><td>EX</td><td>IO</td></tr>
  <tr><td>70</td><td>CMP</td><td>FX</td><td>RET</td></tr>
  <th>Main OP<td><b>Sub Op</b></td><td><b>Assembly</b></td><td><b>Condition</b></td></th>
  <tr><td>3X</td><td>38</td><td>SWPS</td><td>N/A</td></tr>
  <tr><td>5X</td><td>51</td><td>JE</td><td>==</td></tr>
  <tr><td>5X</td><td>52</td><td>JG</td><td>></td></tr>
  <tr><td>5X</td><td>53</td><td>JL</td><td><</td></tr>
  <tr><td>5X</td><td>54</td><td>JGE</td><td>>=</td></tr>
  <tr><td>5X</td><td>55</td><td>JLE</td><td><=</td></tr>
  <tr><td>5X</td><td>56</td><td>JNE</td><td>!=</td></tr>
  <tr><td>6X</td><td>61</td><td>CE</td><td>==</td></tr>
  <tr><td>6X</td><td>62</td><td>CG</td><td>></td></tr>
  <tr><td>6X</td><td>63</td><td>CL</td><td><</td></tr>
  <tr><td>6X</td><td>64</td><td>CGE</td><td>>=</td></tr>
  <tr><td>6X</td><td>55</td><td>CLE</td><td><=</td></tr>
  <tr><td>6X</td><td>66</td><td>CNE</td><td>!=</td></tr>
  <tr><td>EX</td><td>E0</td><td>OUT 0</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E1</td><td>OUT 1</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E2</td><td>OUT 2</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E3</td><td>OUT 3</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E4</td><td>OUT 4</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E5</td><td>OUT 5</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E6</td><td>OUT 6</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E7</td><td>OUT 7</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E8</td><td>IN 0</td><td>N/A</td></tr>
  <tr><td>EX</td><td>E9</td><td>IN 1</td><td>N/A</td></tr>
  <tr><td>EX</td><td>EA</td><td>IN 2</td><td>N/A</td></tr>
  <tr><td>EX</td><td>EB</td><td>IN 3</td><td>N/A</td></tr>
  <tr><td>EX</td><td>EC</td><td>IN 4</td><td>N/A</td></tr>
  <tr><td>EX</td><td>ED</td><td>IN 5</td><td>N/A</td></tr>
  <tr><td>EX</td><td>EE</td><td>IN 6</td><td>N/A</td></tr>
  <tr><td>EX</td><td>EF</td><td>IN 7</td><td>N/A</td></tr>
  <tr><td>9X</td><td>97</td><td>SHL</td><td>N/A</td></tr>
  <tr><td>9X</td><td>9F</td><td>SHR</td><td>N/A</td></tr>
  <tr><td>FX</td><td>FF</td><td>HLT</td><td>N/A</td></tr>
</table>
<table id="OPTABLE2" style="margin-top: 5px; text-align: center; visibility: hidden">
  <th>Op Code<td><b>Assembly</b></td><td><b>Op Code</b></td><td><b>Assembly</b></td></th>
  <tr><td>00</td><td>NOP</td><td>80</td><td>NOT</td></tr>
  <tr><td>10</td><td>LDA &#60x&#62</td><td>9X</td><td>AND</td></tr>
  <tr><td>20</td><td>SDA &#60x&#62</td><td>A0</td><td>OR</td></tr>
  <tr><td>3X</td><td>SWPB</td><td>B0</td><td>XOR</td></tr>
  <tr><td>40</td><td>ADD</td><td>CX</td><td>PUSH</td></tr>
  <tr><td>5X</td><td>JMP &#60x&#62</td><td>DX</td><td>OUT X</td></tr>
  <tr><td>6X</td><td>CALL &#60x&#62</td><td>EX</td><td>IN X</td></tr>
  <tr><td>70</td><td>CMP</td><td>FX</td><td>RET</td></tr>
  <th>Main OP<td><b>Sub Op</b></td><td><b>Assembly</b></td><td><b>Condition</b></td></th>
  <tr><td>3X</td><td>38</td><td>SWPS</td><td>N/A</td></tr>
  <tr><td>3X</td><td>34</td><td>SWPC</td><td>N/A</td></tr>
  <tr><td>3X</td><td>3C</td><td>SWPD</td><td>N/A</td></tr>
  <tr><td>3X</td><td>3F</td><td>LIVT</td><td>N/A</td></tr>
  <tr><td>3X</td><td>32</td><td>PUSHF</td><td>N/A</td></tr>
  <tr><td>3X</td><td>36</td><td>POPF</td><td>N/A</td></tr>
  <tr><td>5X</td><td>51</td><td>JE</td><td>==</td></tr>
  <tr><td>5X</td><td>52</td><td>JG</td><td>></td></tr>
  <tr><td>5X</td><td>53</td><td>JL</td><td><</td></tr>
  <tr><td>5X</td><td>54</td><td>JGE</td><td>>=</td></tr>
  <tr><td>5X</td><td>55</td><td>JLE</td><td><=</td></tr>
  <tr><td>5X</td><td>56</td><td>JNE</td><td>!=</td></tr>
  <tr><td>6X</td><td>61</td><td>CE</td><td>==</td></tr>
  <tr><td>6X</td><td>62</td><td>CG</td><td>></td></tr>
  <tr><td>6X</td><td>63</td><td>CL</td><td><</td></tr>
  <tr><td>6X</td><td>64</td><td>CGE</td><td>>=</td></tr>
  <tr><td>6X</td><td>55</td><td>CLE</td><td><=</td></tr>
  <tr><td>6X</td><td>66</td><td>CNE</td><td>!=</td></tr>
  <tr><td>6X</td><td>6F</td><td>INT</td><td>N/A</td></tr>
  <tr><td>9X</td><td>97</td><td>SHL</td><td>N/A</td></tr>
  <tr><td>9X</td><td>9F</td><td>SHR</td><td>N/A</td></tr>
  <tr><td>CX</td><td>C8</td><td>POP</td><td>N/A</td></tr>
  <tr><td>FX</td><td>FF</td><td>HLT</td><td>N/A</td></tr>
</table>
</div>
<div style="width:550px; text-align: center; margin-left: 10px">
<h3>Registers</h3>
<div style="display: flex">
  Instruction Pointer:<textarea id="IP" class="MEM" rows=1 readonly=true cols=4></textarea>
  Accumulator(RA):<textarea id="RA" class="MEM" rows=1 readonly=true cols=4></textarea>
  RB:<textarea id="RB" class="MEM" rows=1 readonly=true cols=4></textarea>
  Stack Pointer:<textarea class="MEM" id="SP" rows=1 readonly=true cols=4></textarea>
</div>
<div id="V2R" style="display: flex; visibility: hidden">
  RC:<textarea id="RC" class="MEM" rows=1 readonly=true cols=4></textarea>
  RD:<textarea id="RD" class="MEM" rows=1 readonly=true cols=4></textarea>
  IVT:<textarea id="IVT" class="MEM" rows=1 readonly=true cols=4></textarea>
</div>
<h3>Memory</h3>
<table>
<th><textarea id="mr" rows=1 cols=2></textarea>
<td>X0</td><td>X1</td><td>X2</td><td>X3</td>
<td>X4</td><td>X5</td><td>X6</td><td>X7</td>
<td>X8</td><td>X9</td><td>XA</td><td>XB</td>
<td>XC</td><td>XD</td><td>XE</td><td>XF</td>
</th>
<tr>
<td>0X</td>
<td><textarea id="A00" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A01" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A02" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A03" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A04" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A05" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A06" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A07" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A08" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A09" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A0A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A0B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A0C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A0D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A0E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A0F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>1X</td>
<td><textarea id="A10" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A11" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A12" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A13" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A14" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A15" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A16" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A17" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A18" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A19" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A1A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A1B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A1C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A1D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A1E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A1F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>2X</td>
<td><textarea id="A20" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A21" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A22" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A23" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A24" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A25" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A26" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A27" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A28" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A29" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A2A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A2B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A2C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A2D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A2E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A2F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>3X</td>
<td><textarea id="A30" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A31" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A32" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A33" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A34" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A35" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A36" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A37" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A38" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A39" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A3A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A3B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A3C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A3D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A3E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A3F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>4X</td>
<td><textarea id="A40" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A41" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A42" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A43" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A44" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A45" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A46" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A47" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A48" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A49" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A4A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A4B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A4C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A4D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A4E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A4F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>5X</td>
<td><textarea id="A50" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A51" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A52" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A53" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A54" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A55" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A56" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A57" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A58" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A59" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A5A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A5B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A5C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A5D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A5E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A5F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>6X</td>
<td><textarea id="A60" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A61" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A62" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A63" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A64" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A65" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A66" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A67" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A68" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A69" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A6A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A6B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A6C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A6D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A6E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A6F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>7X</td>
<td><textarea id="A70" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A71" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A72" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A73" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A74" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A75" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A76" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A77" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A78" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A79" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A7A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A7B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A7C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A7D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A7E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A7F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>8X</td>
<td><textarea id="A80" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A81" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A82" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A83" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A84" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A85" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A86" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A87" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A88" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A89" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A8A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A8B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A8C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A8D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A8E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A8F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>9X</td>
<td><textarea id="A90" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A91" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A92" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A93" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A94" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A95" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A96" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A97" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A98" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A99" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A9A" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A9B" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A9C" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A9D" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A9E" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="A9F" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>AX</td>
<td><textarea id="AA0" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA1" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA2" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA3" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA4" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA5" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA6" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA7" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA8" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AA9" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AAA" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AAB" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AAC" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AAD" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AAE" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AAF" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>BX</td>
<td><textarea id="AB0" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB1" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB2" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB3" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB4" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB5" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB6" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB7" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB8" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AB9" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ABA" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ABB" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ABC" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ABD" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ABE" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ABF" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>CX</td>
<td><textarea id="AC0" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC1" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC2" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC3" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC4" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC5" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC6" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC7" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC8" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AC9" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ACA" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ACB" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ACC" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ACD" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ACE" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ACF" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>DX</td>
<td><textarea id="AD0" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD1" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD2" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD3" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD4" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD5" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD6" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD7" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD8" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AD9" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ADA" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ADB" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ADC" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ADD" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ADE" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="ADF" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<tr>
<td>EX</td>
<td><textarea id="AE0" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE1" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE2" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE3" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE4" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE5" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE6" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE7" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE8" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AE9" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AEA" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AEB" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AEC" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AED" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AEE" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AEF" rows=1 cols=2 readonly=true></textarea></td>
</tr>
<td>FX</td>
<td><textarea id="AF0" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF1" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF2" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF3" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF4" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF5" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF6" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF7" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF8" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AF9" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AFA" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AFB" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AFC" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AFD" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AFE" rows=1 cols=2 readonly=true></textarea></td>
<td><textarea id="AFF" rows=1 cols=2 readonly=true></textarea></td>
</tr>
</table>
<textarea id="console" readonly=true rows=3 cols=58></textarea>
</div>
</div>
<style>
textarea{
  background-color: black;
  color: lightgreen;
  resize: none
}
h1{
  color: red
}
body{
  background-color: lightblue
}
td > textarea{
  background-color: lightblue;
  color: black;
  border: none;
}
td, th, table{
  border: 1px solid black;
}
table{
  margin-left: auto;
  margin-right: auto;
}
button{
  background-color: blue;
  color: white;
}
.MEM{
  margin-right: 5px;
  color: black;
  background-color: lightblue;
}
</style>
<script>
function extend(value, len){
  let tmp=value.toString(16).toUpperCase();
  while(tmp.length<len){
    tmp="0"+tmp;
  }
  return tmp;
}
function handleIO(){
  for(i=0; i<8; i++){
    if(IOFUNC[i]!=null) IOFUNC[i](IO[i]);
    IO[i]=0;
  } 
  for(i=8; i<16; i++){
    if(IOFUNC[i]!=null) IOFUNC[i](i);
  } 
}
function CONSOLE(data){
  if(data==0) return;
  let term=document.getElementById("console");
  if(data==8) term.innerHTML = term.innerHTML.slice(0, -1);
  else if(data==12) term.innerHTML = "";
  else term.innerHTML = term.innerHTML + String.fromCharCode(data);
}
function push(value){
  MEM[SP]=value;
  SP--;
}
function pop(){
  SP++;
  return MEM[SP];
}
function updateVM(){
  document.getElementById("IP").innerHTML = extend(IP, 4);
  document.getElementById("RA").innerHTML = extend(RA, 4);
  document.getElementById("RB").innerHTML = extend(RB, 4);
  document.getElementById("RC").innerHTML = extend(RC, 4);
  document.getElementById("RD").innerHTML = extend(RD, 4);
  document.getElementById("IVT").innerHTML = extend(IVT, 4);
  document.getElementById("SP").innerHTML = extend(SP, 4);
  MEM_REGION=document.getElementById("mr").value;
  for(i=0; i<256; i++){
    document.getElementById("A"+extend(i,2)).innerHTML = extend(MEM[(MEM_REGION*256)+i],2);
  }
}
let MEM_REGION=0;
let IP=0;
let RA=0;
let RB=0;
let SP=0;
let MEM=[];
let RC=0;
let RD=0;
let IVT=0;
let FLAGS=0 /* 00RRCMMI;
	       RR: 00 None, 01 Equal, 10 Greater, 11 Lesser;
	       C: 1 Carry Set, 0 Carry Clear
	       MM: 00 Standered Mode, 01 Full 16 bit mode, 10 32 bit protected mode
	           11 Virtual JSVM version 1 mode
  */
let IO=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
let IOFUNC = [CONSOLE, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null];
let VERSION=1;
let VERSION_OLD=1;
function reset(){
  IP=0;
  FLAGS=0;  
  RA=0;
  RB=0;
  SP=0;
  RC=0;
  RD=0;
  IVT=0;
  IO=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];
  MEM=[];
  CONSOLE(12);
  for(i=0; i<65536; i++){
    MEM.push(0);
  }
  updateVM();
  if(VERSION>=2){
    document.getElementById("V2R").style.visibility = "visible";
    document.getElementById("OPTABLE1").style.visibility = "hidden";
    document.getElementById("OPTABLE2").style.visibility = "visible";
    document.getElementById("OPTABLE1").style.position = "absolute";
  } else{
    document.getElementById("V2R").style.visibility = "hidden";
    document.getElementById("OPTABLE1").style.visibility = "visible";
    document.getElementById("OPTABLE2").style.visibility = "hidden";
    document.getElementById("OPTABLE1").style.position = "relative";
  }
}
document.addEventListener('keydown', function (event){
  if(event.defaultPrevented){
    return;
  }
  if(event.key=="Escape"){
    if(VERSION==0){
      VERSION=VERSION_OLD;
    } else{
      VERSION_OLD=VERSION;
      VERSION=0;
    }
  } else if(event.key=="1"){
    if(VERSION==0){
      VERSION=1;
      VERSION_OLD=1;
      reset();
    }
  } else if(event.key=="2"){
    if(VERSION==0){
      VERSION=2;
      VERSION_OLD=2;
      reset();
    }
  }
});
function load(){
  let read = document.getElementById("DMC").value.split("\n");
  let addr=0;
  for(i=0; i<read.length; i++){
    if(read[i][1]=="x"){
      if(read[i].includes(":")){
        MEM[parseInt(read[i].split(":")[0],16)] = parseInt(read[i].split(":")[1],16);
      } else{
        MEM[addr]=parseInt(read[i],16);
        addr++;
      }
    } else{
      if(read[i].includes(":")){
        MEM[parseInt(read[i].split(":")[0],2)] = parseInt(read[i].split(":")[1],2);
      } else{
        MEM[addr]=parseInt(read[i],2);
        addr++;
      }
    }
  }
  run=false;
  updateVM();
}
let run=true;
function exec(){
  run=true
  while(MEM[IP]!=255 && run){
    if(MEM[IP]==16){//LDA <X>
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      RA=MEM[tmp];
    } else if(MEM[IP]==32){//SDA <X>
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      MEM[tmp]=RA % 256;
    } else if(MEM[IP]==48){//SWP A,B
      let tmp=RA;
      RA=RB;
      RB=tmp % 256;
    } else if(MEM[IP]==56){//SWP A,SP
      let tmp=RA;
      RA=SP;
      SP=tmp;
    } else if(MEM[IP]==64){
      RA=RA+RB;
    } else if(MEM[IP]==80){ //JMP
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      IP=tmp-1;
    } else if(MEM[IP]==81){ //JE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)==0b00010000) IP=tmp-1;
    } else if(MEM[IP]==82){ //JG
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)==0b00100000) IP=tmp-1;
    } else if(MEM[IP]==83){//JL
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)==0b00110000) IP=tmp-1;
    } else if(MEM[IP]==84){//JGE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)!=0b00110000) IP=tmp-1;
    } else if(MEM[IP]==85){//JLE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)!=0b00100000) IP=tmp-1;
    } else if(MEM[IP]==86){//JNE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)!=0b00010000) IP=tmp-1;
    } else if(MEM[IP]==96){ //CALL
      push(IP%256);
      push(Math.floor(IP/256))
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      IP=tmp-1;
    } else if(MEM[IP]==97){ //CE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)==0b00010000){
        push(IP%256);
        push(Math.floor(IP/256));
        IP=tmp-1;
      }
    } else if(MEM[IP]==98){ //CG
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)==0b00100000) {
        push(IP%256);
        push(Math.floor(IP/256));
        IP=tmp-1;
      }
    } else if(MEM[IP]==99){//CL
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)==0b00110000) {
        push(IP%256);
        push(Math.floor(IP/256));
        IP=tmp-1;
      }
    } else if(MEM[IP]==100){//CGE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)!=0b00110000) {
        push(IP%256);
        push(Math.floor(IP/256));
        IP=tmp-1;
      }
    } else if(MEM[IP]==101){//CLE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)!=0b00100000) {
        push(IP%256);
        push(Math.floor(IP/256));
        IP=tmp-1;
      }
    } else if(MEM[IP]==102){//CNE
      let tmp=parseInt(extend(MEM[IP+1], 2)+extend(MEM[IP+2], 2), 16);
      IP+=2;
      if((FLAGS & 0b00110000)!=0b00010000) {
        push(IP%256);
        push(Math.floor(IP/256));
        IP=tmp-1;
      }
    } else if(MEM[IP]==112){ //CMP
	var t=Math.sign(RB-RA);
	FLAGS &= 0b11001111;
	if (t==0){
	   FLAGS |= 0b00010000;
	} else if(t == -1){
	   FLAGS |= 0b00110000;
	} else{
	   FLAGS |= 0b00100000;
	}
    } else if(MEM[IP]==128){//NOT
      let tmp=RA.toString(2).split('');
      for(i=0; i<tmp.length; i++){
        tmp[i] = tmp[i]=='0' ? '1':'0';
      }
      RA=parseInt(tmp.join(''),2);
    } else if(MEM[IP]==144){//AND
      let tmp=RA.toString(2).split('');
      let tmp2=RB.toString(2).split('');
      for(i=0; i<tmp.length; i++){
        tmp[i] = tmp[i]==tmp2[i] ? '1':'0';
      }
      RA=parseInt(tmp.join(''),2);
    } else if(MEM[IP]==160){//OR
      let tmp=RA.toString(2).split('');
      let tmp2=RB.toString(2).split('');
      for(i=0; i<tmp.length; i++){
        tmp[i] = (tmp[i]=='1' || tmp2[i]=='1') ? '1':'0';
      }
      RA=parseInt(tmp.join(''),2);
    } else if(MEM[IP]==176){ //XOR
      let tmp=RA.toString(2).split('');
      let tmp2=RB.toString(2).split('');
      for(i=0; i<tmp.length; i++){
        tmp[i] = tmp[i]!=tmp2[i] ? '1':'0';
      }
      RA=parseInt(tmp.join(''),2);
    } else if(MEM[IP]==192){ //PUSH
      push(RA % 256);
    } else if(MEM[IP]==208 && (VERSION<2 || (FLAGS & 0b00000110)==0b00000110)){ //POP
      RA=pop();
    } else if(Math.floor(MEM[IP]/16)==13 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)){
      IO[MEM[IP]%16]=RA % 256;
    }else if(Math.floor(MEM[IP]/16)==14){
      if(VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110){
          RA=IO[MEM[IP]%16] % 256;
      } else{
        if(MEM[IP]>=232){
          RA=IO[MEM[IP]%16] % 256;
        } else{
          IO[MEM[IP]%16]=RA % 256;
        }
      }
    }else if(MEM[IP]==240){
      IP=pop()*256;
      IP+=pop()
    } else if(MEM[IP]==52 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)){
      let tmp=RA;
      RA=RC;
      RC=tmp % 256;
    } /* else if(MEM[IP]==52 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)){
      let tmp=RA;
      RA=RC; // Why do I have 2 copies of this?
      RC=tmp;
    } */ else if(MEM[IP]==54 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)){
      let tmp=RA;
      RA=RD;
      RD=tmp % 256;
    } else if(MEM[IP]==63 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)){
      let tmp=RA;
      RA=IVT;
      IVT=tmp % 256;
    } else if(MEM[IP] == 50 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)) {
	push(FLAGS);
    } else if(MEM[IP] == 54 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)) {
	FLAGS=pop();
    } else if(MEM[IP]==111 && (VERSION>=2 || (FLAGS & 0b00000110)!=0b00000110)){
      IP++;
      push(IP%256);
      push(Math.floor(IP/256))
      let tmp=parseInt(extend(MEM[(256*IVT)+MEM[IP]*2], 2)+extend(MEM[(256*IVT)+MEM[IP]*2+1], 2), 16);
      IP+=2;
      IP=tmp-1;
    }
    IP++;
    updateVM();
    handleIO();
    setTimeout(exec, 10);
  }
}
function asm(){
  let code=document.getElementById("ASM").value.split("\n");
  let mc=[];
  let line=[];
  let bits=8;
  for(i=0; i<code.length; i++){
    line=code[i].split(" ");
    if(line[0]=='db'){
      if(line.length>=3) mc.push("0x"+line[1]+":"+line[2])
      else mc.push("0x"+line[1]);
    } else if(line[0] =='da'){
      let j=parseInt(line[1], 16);
      for (k=2; k<line.length; k++){
        mc.push("0x"+j.toString(16)+":"+line[k]);
        j++;
      }
    }else if(line[0]=="NOP"){
      mc.push(0);
    } else if(line[0]=="LDA"){
      mc.push("0x10");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="SDA"){
      mc.push("0x20");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="SWPB"){
      mc.push("0x30");
    } else if(line[0]=="SWPS"){
      mc.push("0x38");
    } else if(line[0]=="ADD"){
      mc.push("0x40");
    } else if(line[0]=="CMP"){
      mc.push("0x70");
    } else if(line[0]=="NOT"){
      mc.push("0x80");
    } else if(line[0]=="OR"){
      mc.push("0xA0");
    } else if(line[0]=="XOR"){
      mc.push("0xB0");
    } else if(line[0]=="PUSH"){
      mc.push("0xC0");
    } else if(line[0]=="POP"){
      if(VERSION>=2) mc.push(0xC8);
      else mc.push("0xD0");
    } else if(line[0]=="RET"){
      mc.push("0xF0");
    } else if(line[0]=="HLT"){
      mc.push("0xFF");
    } else if(line[0]=="AND"){
      mc.push("0x90");
    } else if(line[0]=="SHL"){
      mc.push("0x97");
    } else if(line[0]=="SHR"){
      mc.push("0x9F");
    } else if(line[0]=="JMP"){
      mc.push("0x50");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="JE"){
      mc.push("0x51");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="JG"){
      mc.push("0x52");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="JL"){
      mc.push("0x53");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="JGE"){
      mc.push("0x54");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="JLE"){
      mc.push("0x55");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="JNE"){
      mc.push("0x56");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="CALL") {
      mc.push("0x60");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    }else if(line[0]=="CE"){
      mc.push("0x61");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="CG"){
      mc.push("0x62");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="CL"){
      mc.push("0x63");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="CGE"){
      mc.push("0x64");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="CLE"){
      mc.push("0x65");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="CNE"){
      mc.push("0x66");
      mc.push("0x"+Math.floor(parseInt(line[1],16)/256).toString(16));
      mc.push("0x"+Math.floor(parseInt(line[1],16)%256).toString(16));
    } else if(line[0]=="OUT"){
      if(VERSION>=2) mc.push("0xD"+line[1]);
      else mc.push("0xE"+line[1]);
    } else if(line[0]=="IN"){
      if(VERSION>=2) mc.push("0xE"+line[1]);
      else mc.push("0xE"+(parseInt(line[1])+8).toString(16));
    } else if(line[0]=="SWPC" && VERSION>=2){
      mc.push("0x34");
    } else if(line[0]=="SWPD" && VERSION>=2){
      mc.push("0x3C");
    } else if(line[0]=="LIVT" && VERSION>=2){
      mc.push("0x3F");
    } else if(line[0]=="PUSHF" && VERSION>=2){
      mc.push("0x32");
    } else if(line[0]=="POPF" && VERSION>=2){
      mc.push("0x36");
    } else if(line[0]=="INT" && VERSION>=2){
      mc.push("0x6F");
      mc.push("0x"+line[1]);
    } else if(line[0]=="BITS" && VERSION>=2){
      if (line[1]=="8"){
	bits = 8;
      } else if(line[1]=="16"){
	bits = 16;
      } else if(line[1]=="32"){
	bits = 32;
      } else if(line[1]=="8V"){
	bits = 7;
      }
    } 
  }
  document.getElementById("DMC").value = mc.join("\n");
}
</script>
</body>
</html>
